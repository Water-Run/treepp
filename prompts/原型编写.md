# 原型编写  

考虑我的项目架构:  

```plaintext
Windows PowerShell
版权所有（C） Microsoft Corporation。保留所有权利。

安装最新的 PowerShell，了解新功能和改进！https://aka.ms/PSWindows

PS D:\数据\Rust\tree++> tree /f
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:.
│  .gitignore
│  Cargo.lock
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
├─.idea
│  │  .gitignore
│  │  modules.xml
│  │  tree++.iml
│  │  vcs.xml
│  │  workspace.xml
│  │
│  └─inspectionProfiles
│          Project_Default.xml
│
├─.proto
│  │  PROTOTYPES.txt
│  │
│  ├─cli_compat
│  │  │  .gitignore
│  │  │  Cargo.toml
│  │  │
│  │  └─src
│  │          main.rs
│  │
│  ├─match_rules
│  │  │  .gitignore
│  │  │  Cargo.toml
│  │  │
│  │  └─src
│  │          main.rs
│  │
│  ├─mft_engine
│  │  │  .gitignore
│  │  │  Cargo.toml
│  │  │
│  │  └─src
│  │          main.rs
│  │
│  ├─parallel_scan
│  │  │  .gitignore
│  │  │  Cargo.toml
│  │  │
│  │  └─src
│  │          main.rs
│  │
│  ├─render_and_output
│  │  │  .gitignore
│  │  │  Cargo.toml
│  │  │
│  │  └─src
│  │          main.rs
│  │
│  └─walk_baseline
│      │  .gitignore
│      │  Cargo.toml
│      │
│      └─src
│              main.rs
│
├─prompts
│      原型编写.md
│      编码规范.md
│
├─src
│      cli.rs
│      config.rs
│      main.rs
│      output.rs
│      render.rs
│      scan.rs
│
└─test
        intergration_test.rs
        speed_compare.py

PS D:\数据\Rust\tree++>
```

对应文档:  

```markdown
# `tree++`: 好的多的Windows`tree`命令

*[English](./README.md)*

Windows上的`tree`命令自从近40年前发布以来几乎就没有改动. 在如今LLM的时代, 作为描述项目结构非常常用的工具, 仅有的`/f`和`/a`两个参数的功能显然捉襟见肘. 同时, 它很慢.  

**`tree++`是对`tree`的一次全面升级**, 为Windows平台下的`tree`命令引入了:  

- ***在兼容原有的Windows`tree`命令参数和输出的基础上, 扩展参数集, 涵盖包括显示文件大小, 递归深度限制, 修改输出风格, 将结果输出至文件, 及排除指定目录(包括遵循`.gitignore`)等等常用功能***
- ***支持多线程, 在大且复杂的目录中轻松获取指数级的性能提升; 在管理员模式下运行时还可选MFT模式, 提供极快的速度***  

参数支持传统Windows风格(如`/f`, 不区分大小写)及Unix风格(如`-f`和`--files`).  

**`tree++`使用`Rust`实现**, 开源于[GitHub](https://github.com/Water-Run/treepp).  

## 安装

从[Release](https://github.com/Water-Run/treepp/releases/tag/0.1.0)下载`tree++.zip`, 解压到合适目录, 并将目录添加至环境变量.  

开启Windows终端, 执行:  

```powershell
treepp /v
```

有输出:

```powershell
tree++ version 0.1.0

A Better tree command for Windows.

author: WaterRun
link: https://github.com/Water-Run/treepp
```

即完成安装.

随后, 你可以和普通的Windows `tree`命令一样的使用:

```powershell
treepp /f
```

对于大目录, 你可以使用MFT: 直接扫描NTFS目录索引将非常快. 这需要你以管理员权限运行`treepp`, 建议使用`Sudo for windows`. `treepp`将自动识别当前的运行状态:

```powershell
sudo treepp /f --mft
```

> 在`mft`下, 功能将会有所限制

## 速览

| 参数集(等价写法)                     | 说明                                         |
|-------------------------------|--------------------------------------------|
| `--help` `-h` `/?`            | 显示帮助信息                                     |
| `--version` `-v` `/V`         | 显示版本信息                                     |
| `--ascii` `-a` `/A`           | 使用 ASCII 字符绘制树                             |
| `--files` `-f` `/F`           | 显示文件                                       |
| `--full-path` `-p` `/FP`      | 显示完整路径                                     |
| `--human-readable` `-H` `/HR` | 以人类可读方式显示文件大小                              |
| `--no-indent` `-i` `/NI`      | 不显示树形连接线                                   |
| `--reverse` `-r` `/R`         | 逆序排序                                       |
| `--size` `-s` `/S`            | 显示文件大小(字节)                                 |
| `--date` `-d` `/DT`           | 显示最后修改日期                                   |
| `--exclude` `-I` `/X`         | 排除匹配的文件                                    |
| `--level` `-L` `/L`           | 限制递归深度                                     |
| `--include` `-m` `/M`         | 仅显示匹配的文件                                   |
| `--quote` `-q` `/Q`           | 用双引号包裹文件名                                  |
| `--dirs-first` `-D` `/DF`     | 目录优先显示                                     |
| `--disk-usage` `-u` `/DU`     | 显示目录累计大小                                   |
| `--ignore-case` `-c` `/IC`    | 匹配时忽略大小写                                   |
| `--no-report` `-n` `/NR`      | 不显示末尾统计信息                                  |
| `--prune` `-P` `/P`           | 修剪空目录                                      |
| `--sort` `-S` `/SO`           | 指定排序方式(`name`、`size`、`mtime` 等)            |
| `--no-header` `-N` `/NH`      | 不显示卷信息与头部报告信息                              |
| `--silent` `-l` `/SI`         | 终端静默(结合`output`指令使用)                       |
| `--output` `-o` `/O`          | 将结果输出至文件(`.txt`, `.json`, `.yml`, `.toml`) |
| `--thread` `-t` `/T`          | 扫描线程数(默认为24)                               |
| `--mft` `-M` `/MFT`           | 使用MFT(管理员权限, 功能有限制)                        |
| `--gitignore` `-g` `/G`       | 遵循`.gitignore`                             |


> 完整参数集参阅: [tree++参数集文档](./OPTIONS-zh.md)
```

及对应的各个选项的详细说明:  

```markdown
# `tree++`: 完整参数说明和示例文档

本文档简述 [tree++](https://github.com/Water-Run/treepp) 所支持的全部参数与使用示例。  

## 模拟目录

指令的示例输出基于此模拟目录：

```powershell
PS D:\Rust\tree++> treepp /F
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

1 个目录, 12 个文件
```

> `treepp /F` 与 Windows 原生 `tree /F` 行为完全一致：显示卷头信息、树形结构以及末尾统计信息。直接执行 `treepp` 时亦保持原始语义仅展示目录结构。

## 全局用法

```powershell
treepp [<PATH>] [<OPTIONS>...]
```

- `<PATH>`：可选，默认为当前目录。
- `<OPTIONS>`：可重复、可混用。支持下表列出的 `--`（GNU）、`-`（短参数）与 `/`（CMD，大小写不敏感）三种形式。

## 指令的具体说明

### `/?`: 显示帮助

**功能：** 显示完整的参数帮助信息。

**语法：**

```powershell
treepp (--help | -h | /?) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /?
tree++ - a better tree command for Windows
Usage:
  treepp [path] [options]
Options:
  -h, --help        Show help information
  -v, --version     Show version information
  ...
```

### `/V`: 显示版本

**功能：** 输出当前版本信息。

**语法：**

```powershell
treepp (--version | -v | /V)
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /V
tree++ version 0.1.0
author: WaterRun
link: https://github.com/Water-Run/treepp
```

### `/A`: 使用 ASCII 字符绘制树

**功能：** 以 ASCII 树形字符输出，兼容 `tree /A`。

**语法：**

```powershell
treepp (--ascii | -a | /A) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /A
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
\---src

1 个目录
```

### `/F`: 显示文件

**功能：** 在目录树中列出文件条目。

**语法：**

```powershell
treepp (--files | -f | /F) [<PATH>]
```

**示例（与 `/A` 组合）：**

```powershell
PS D:\Rust\tree++> treepp /A /F
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
|   Cargo.toml
|   LICENSE
|   OPTIONS-zh.md
|   OPTIONS.md
|   README-zh.md
|   README.md
|
\---src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

1 个目录, 12 个文件
```

### `/FP`: 显示完整路径

**功能：** 以绝对路径展示所有条目。

**语法：**

```powershell
treepp (--full-path | -p | /FP) [<PATH>]
```

**示例（与 `/F` 组合）：**

```powershell
PS D:\Rust\tree++> treepp /F /FP
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  D:\Rust\tree++\Cargo.toml
│  D:\Rust\tree++\LICENSE
│  D:\Rust\tree++\OPTIONS-zh.md
│  D:\Rust\tree++\OPTIONS.md
│  D:\Rust\tree++\README-zh.md
│  D:\Rust\tree++\README.md
│
└─D:\Rust\tree++\src
        D:\Rust\tree++\src\cli.rs
        D:\Rust\tree++\src\config.rs
        D:\Rust\tree++\src\main.rs
        D:\Rust\tree++\src\output.rs
        D:\Rust\tree++\src\render.rs
        D:\Rust\tree++\src\scan.rs

1 个目录, 12 个文件
```

### `/HR`: 人类可读文件大小

**功能：** 将文件大小转换为 B/KB/MB 等易读单位，常与 `/S` 搭配。

**语法：**

```powershell
treepp (--human-readable | -H | /HR) [<PATH>]
```

**示例（`/S /HR /F`）：**

```powershell
PS D:\Rust\tree++> treepp /S /HR /F
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml        982 B
│  LICENSE           1.0 KB
│  OPTIONS-zh.md     7.9 KB
│  OPTIONS.md        7.5 KB
│  README-zh.md      10.2 KB
│  README.md         9.1 KB
│
└─src
        cli.rs         6.0 KB
        config.rs      2.8 KB
        main.rs        1.9 KB
        output.rs      7.3 KB
        render.rs      5.2 KB
        scan.rs        8.8 KB

1 个目录, 12 个文件
```

### `/S`: 显示文件大小（字节）

**功能：** 显示文件字节数，可与 `/HR` 联用。

**语法：**

```powershell
treepp (--size | -s | /S) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /S /F
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml        982
│  LICENSE           1067
│  OPTIONS-zh.md     8120
│  OPTIONS.md        7644
│  README-zh.md     10420
│  README.md         9288
│
└─src
        cli.rs         6120
        config.rs      2840
        main.rs        1980
        output.rs      7440
        render.rs      5360
        scan.rs        9020

1 个目录, 12 个文件
```

### `/NI`: 不显示树形连接线

**功能：** 用缩进取代树形符号。

**语法：**

```powershell
treepp (--no-indent | -i | /NI) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /F /NI
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
  Cargo.toml
  LICENSE
  OPTIONS-zh.md
  OPTIONS.md
  README-zh.md
  README.md

  src
    cli.rs
    config.rs
    main.rs
    output.rs
    render.rs
    scan.rs

1 个目录, 12 个文件
```

### `/R`: 逆序排序

**功能：** 将当前排序结果倒序输出，可与 `/SO` 组合。

**语法：**

```powershell
treepp (--reverse | -r | /R) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /F /R
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  README.md
│  README-zh.md
│  OPTIONS.md
│  OPTIONS-zh.md
│  LICENSE
│  Cargo.toml
│
└─src
        scan.rs
        render.rs
        output.rs
        main.rs
        config.rs
        cli.rs

1 个目录, 12 个文件
```

### `/DT`: 显示最后修改日期

**功能：** 在条目后追加文件/目录的最后修改时间。

**语法：**

```powershell
treepp (--date | -d | /DT) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /F /DT
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml        2025-12-16 10:02:11
│  LICENSE           2024-11-03 09:00:29
│  OPTIONS-zh.md     2025-12-17 14:20:16
│  OPTIONS.md        2025-12-17 14:18:05
│  README-zh.md      2025-12-18 09:12:40
│  README.md         2025-12-18 09:10:03
│
└─src
        cli.rs         2025-12-17 22:41:12
        config.rs      2025-12-17 22:35:09
        main.rs        2025-12-17 22:12:47
        output.rs      2025-12-17 23:01:58
        render.rs      2025-12-17 22:58:47
        scan.rs        2025-12-17 23:05:58

1 个目录, 12 个文件
```

### `/X`: 排除匹配项

**功能：** 忽略与模式匹配的文件或目录。

**语法：**

```powershell
treepp (--exclude | -I | /X) <PATTERN> [<PATH>]
```

**示例（排除 `*.md`）：**

```powershell
PS D:\Rust\tree++> treepp /F /X *.md
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

1 个目录, 8 个文件
```

### `/L`: 限制递归深度

**功能：** 指定最大递归层级。

**语法：**

```powershell
treepp (--level | -L | /L) <LEVEL> [<PATH>]
```

**示例（仅展示 1 层）：**

```powershell
PS D:\Rust\tree++> treepp /F /L 1
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
└─src

1 个目录, 6 个文件
```

### `/M`: 仅显示匹配项

**功能：** 只保留符合模式的条目。

**语法：**

```powershell
treepp (--include | -m | /M) <PATTERN> [<PATH>]
```

**示例（仅显示 `*.rs`）：**

```powershell
PS D:\Rust\tree++> treepp /F /M *.rs
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

1 个目录, 6 个文件
```

### `/Q`: 引号包裹文件名

**功能：** 以双引号包裹路径，方便复制或脚本处理。

**语法：**

```powershell
treepp (--quote | -q | /Q) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /F /Q
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  "Cargo.toml"
│  "LICENSE"
│  "OPTIONS-zh.md"
│  "OPTIONS.md"
│  "README-zh.md"
│  "README.md"
│
└─"src"
        "cli.rs"
        "config.rs"
        "main.rs"
        "output.rs"
        "render.rs"
        "scan.rs"

1 个目录, 12 个文件
```

### `/DF`: 目录优先显示

**功能：** 输出时先列目录，再列文件。

**语法：**

```powershell
treepp (--dirs-first | -D | /DF) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /F /DF
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs
│
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md

1 个目录, 12 个文件
```

### `/DU`: 显示目录累计大小

**功能：** 统计每个目录的累计磁盘用量，可与 `/HR` 配合。

**语法：**

```powershell
treepp (--disk-usage | -u | /DU) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /DU /HR
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
src             31.5 KB
```

### `/IC`: 匹配时忽略大小写

**功能：** 使 `/M`、`/X` 等匹配指令忽略大小写。

**语法：**

```powershell
treepp (--ignore-case | -c | /IC) [<PATH>]
```
**示例（`/F /M *.MD /IC`）：**
```powershell
PS D:\Rust\tree++> treepp /F /M *.MD /IC
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md

0 个目录, 4 个文件
```

### `/NR`: 不显示末尾统计信息

**功能：** 省略“X 个目录, Y 个文件”汇总。

**语法：**

```powershell
treepp (--no-report | -n | /NR) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /F /NR
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs
```

### `/P`: 修剪空目录

**功能：** 隐藏不包含内容的目录节点。

**语法：**

```powershell
treepp (--prune | -P | /P) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /P /F
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

1 个目录, 12 个文件
```

### `/SO`: 指定排序方式

**功能：** 依据 `name`、`size`、`mtime` 等字段进行排序，可与 `/R` 组合。

**语法：**

```powershell
treepp (--sort | -S | /SO) <KEY> [<PATH>]
```

**示例（`/F /SO name`）：**

```powershell
PS D:\Rust\tree++> treepp /F /SO name
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

1 个目录, 12 个文件
```

*可选的排序字段及说明:*

| 字段      | 说明        |  
|---------|-----------|  
| `name`  | 按文件名字母表升序 |
| `size`  | 按文件大小升序   |
| `mtime` | 按修改时间升序   |
| `ctime` | 按创建时间升序   |

### `/NH`: 不显示卷信息与头部报告

**功能：** 省略卷名、卷序列号等头部内容。

**语法：**

```powershell
treepp (--no-header | -N | /NH) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /F /NH
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

1 个目录, 12 个文件
```

### `/SI`: 终端静默

**功能：** 禁止向标准输出写入结果，一般与 `/O` 搭配，静默写入文件。

**语法：**

```powershell
treepp (--silent | -l | /SI) [<PATH>]
```

**示例（`/F /O tree.json /SI`）：**

```powershell
PS D:\Rust\tree++> treepp /F /O tree.json /SI
PS D:\Rust\tree++>
```

### `/O`: 输出到文件

**功能：** 将结果持久化到 `.txt` / `.json` / `.yml` / `.toml` 文件。默认仍在控制台输出，可配合 `/SI` 静默。

**语法：**

```powershell
treepp (--output | -o | /O) <FILE.{txt|json|yml|toml}> [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /F /O tree.json
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

1 个目录, 12 个文件

output: D:\Rust\tree++\tree.json
```

### `/T`: 扫描线程数

**功能：** 指定扫描线程数量，默认为 24。

**语法：**

```powershell
treepp (--thread | -t | /T) <N> [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /F /T 32
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

1 个目录, 12 个文件
```

### `/MFT`: 使用 MFT（管理员模式）

**功能：** 在管理员权限下显式启用 NTFS MFT 扫描，绕过常规目录遍历，显著提升大目录性能。需要以管理员权限运行。

> 建议结合[Sudo For Windows](https://learn.microsoft.com/zh-cn/windows/advanced-settings/sudo/)

**语法：**

```powershell
sudo treepp [<PATH>] (--mft | -M | /MFT) [<OPTIONS>...]
```

**示例：**

```powershell
PS D:\Rust\tree++> sudo treepp /F /MFT
[MFT] enabled: scanning via NTFS Master File Table
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

1 个目录, 12 个文件
```

*需要注意的是，在 MFT 模式下，不可使用以下命令，否则将抛出异常：*

| 命令名称                          |
|-------------------------------|
| `--prune` / `-P` / `/P`       |
| `--level` / `-L` / `/L`       |
| `--gitignore` / `-g` / `/G`   |
| `--include` / `-m` / `/M`     |
| `--exclude` / `-I` / `/X`     |
| `--disk-usage` / `-u` / `/DU` |
| `--sort` / `-S` / `/SO`       |
| `--reverse` / `-r` / `/R`     |

### `/G`: 遵循 `.gitignore`

**功能：** 解析每级目录中的 `.gitignore` 文件，自动忽略匹配条目。

**语法：**

```powershell
treepp (--gitignore | -g | /G) [<PATH>]
```

**示例：**

```powershell
PS D:\Rust\tree++> treepp /F /G
卷 存储 的文件夹 PATH 列表
卷序列号为 26E9-52C1
D:\Rust\tree++
│  Cargo.toml
│  LICENSE
│  OPTIONS-zh.md
│  OPTIONS.md
│  README-zh.md
│  README.md
│
└─src
        cli.rs
        config.rs
        main.rs
        output.rs
        render.rs
        scan.rs

.gitignore rules applied
1 个目录, 12 个文件
```
```

我现在需要进行原型编写, 验证各个子功能的实现, 以便之后减少正式程序的编码.  

我的编码规范如:  

```markdown
# Rust编码规范说明  

在编写代码时, 你使用中文编写注释, 并遵循以下的编码规范.  

**语言级别:** `Rust 2024 Edition`  
**类型注解:** Rust是静态强类型语言，编译器会进行类型推导，但在函数签名、结构体字段、公共API中必须明确标注类型。善用泛型、trait bounds、关联类型、生命周期参数等高级类型特性  
**编码规范:** 严格遵循Rust官方风格指南(rustfmt)和Clippy规范。代码需要在`cargo clippy -- -D warnings`最严格模式下无Warning。采用现代Rust习惯用法，包括：使用`?`运算符进行错误传播、使用`if let`/`while let`进行模式匹配、使用迭代器链式调用、使用`impl Trait`简化返回类型、使用`async/await`异步编程、使用宏(macro_rules!、过程宏)、使用`const fn`和`const generics`等。遵循所有权、借用、生命周期规则，避免不必要的克隆和分配  
**错误处理:** 使用`Result<T, E>`和`Option<T>`进行错误处理，避免panic(除非是不可恢复的逻辑错误)。使用`thiserror`或`anyhow`库优化错误处理  
**文档注释:** 在文件(模块)开头、所有公共(pub)函数、结构体、枚举、trait、宏上都要有遵循rustdoc标准的文档注释(三斜线`///`或模块级`//!`)。代码即文档的编码规范：代码需要尽可能的自描述、易懂，减少非文档注释之外的注释内容。

## 命名约定

- **snake_case**: 变量名、函数名、模块名、宏名、字段名 (如 `user_name`, `get_total`)
- **SCREAMING_SNAKE_CASE**: 常量、静态变量 (如 `MAX_SIZE`, `DEFAULT_TIMEOUT`)
- **PascalCase**: 类型名、trait名、枚举名、枚举变体 (如 `DataProcessor`, `ProcessingStatus::Pending`)
- **'a, 'b**: 生命周期参数 (如 `'static`, `'a`)
- **T, U, K, V**: 泛型类型参数 (如 `T`, `TResult`)

## 文件结构

每个Rust文件(模块)必须按以下顺序组织：

1. 模块级文档注释(`//!`)
2. 属性声明(`#![...]`)
3. use语句(按标准库、外部crate、当前crate分组，组内按字母顺序)
4. 模块声明(`mod`)
5. 常量定义
6. 类型定义(struct、enum、type alias、trait)
7. trait实现
8. 函数定义

单元测试合理整合进代码中, 涵盖完整的边缘情况.  
**原则**: 最大话代码的可读性, 同时保证库级别的高质量规范, 代码即文档的风格, 除了文档注释外尽量减少其它注释, 而是通过代码本身表达.  
```

我考虑编写这些原型:  

```plaintext
PROTOTYPES.txt

此目录存储用于验证的小型子程序, 作为原型, 用于之后合并功能至主程序中.

包括:

01_cli_compat:
  参数解析与等价映射. 验证 /,-,-- 三种风格混用、大小写不敏感与冲突校验; 输出解析后的Config用于对拍.

02_scan_engine:
  扫描引擎原型(统一入口). 在同一程序内提供 walk/parallel 两种扫描模式; 验证两者结果一致、并发下不重不漏、线程数生效与确定性排序.

03_mft_engine:
  NTFS MFT扫描原型(管理员). 验证权限/文件系统检测、记录枚举与root过滤; 明确MFT模式限制与降级策略.

04_match_rules:
  过滤与规则引擎. 验证 include/exclude 通配匹配、ignore-case, 以及分层.gitignore规则叠加与剪枝行为.

05_render_output:
  渲染与输出层. 验证树形文本渲染(ASCII/Unicode/no-indent/quote等)与多格式输出(txt/json/yml/toml)及silent写文件逻辑.
```

而本次对话中, 我希望实现原型:  

架构如:  

```plaintext

```

和我探讨原型的实现, 并明确你的理解和我的需求是否一致. 本次对话中, 先不用写代码.  
